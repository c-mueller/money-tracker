# Plan 007: Internationalisierung (i18n) — Deutsch/Englisch

## Status: Implementiert

## Zusammenfassung
Die Web-UI unterstützt jetzt Deutsch und Englisch. Die Sprache wird instanzweit via Config gesetzt (Default: `de`), kann aber per `Accept-Language`-Header pro Request überschrieben werden. API-Fehlermeldungen und Domain-Validierungen bleiben englisch.

## Ansatz
Einfache Map-basierte Übersetzung ohne externes Framework. Übersetzungen als Go-Maps in `internal/i18n/`. Template-Funktion `{{t "key"}}` für alle UI-Strings.

## Neue Dateien

- `internal/i18n/i18n.go` — Core: Locale-Typ, Bundle, T()-Funktion, ParseLocale, ParseAcceptLanguage
- `internal/i18n/de.go` — Deutsche Übersetzungen (~95 Keys)
- `internal/i18n/en.go` — Englische Übersetzungen
- `internal/i18n/frequencies.go` — Frequenz-Anzeigenamen pro Locale (Täglich/Daily etc.)
- `internal/i18n/i18n_test.go` — Tests für Locale-Parsing, Accept-Language, Translation-Lookup
- `internal/middleware/locale.go` — Accept-Language Middleware

## Geänderte Dateien

- `internal/config/config.go` — Neues `Language` Feld (Default: `"de"`, ENV: `MONEY_TRACKER_LANGUAGE`)
- `internal/api/server.go` — Neue Felder `i18nBundle`, `defaultLocale`; `NewServer()` nimmt `language string`
- `internal/api/router.go` — Locale-Middleware für Web-Routen, Bundle an Renderer übergeben
- `internal/api/template.go` — Bundle integriert, Template-Funcs `t` (Übersetzen), `tf` (Frequenz), `formatDateISO` (für input[type=date]); `formatMoney`/`formatDate` locale-aware (DE: `1.234,50` / `02.01.2006`, EN: `1,234.50` / `01/02/2006`)
- `internal/api/web_handler.go` — `pageData.Lang` Feld, Titel als i18n-Keys
- `cmd/money-tracker/cmd/serve.go` — Language Config an NewServer durchgereicht
- `tests/integration/testutil.go` — NewServer-Aufruf angepasst
- Alle HTML-Templates — Strings → `{{t "key"}}`, Frequenzen → `{{tf ...}}`, `<html lang="{{.Lang}}">`
- `web/static/app.js` — Nutzt `window.i18n` für Copy/Error-Strings
- Layout-Template — Injiziert `window.i18n` Objekt per Script-Tag

## Konfiguration

```bash
# Server-Default Deutsch (Standard)
MONEY_TRACKER_LANGUAGE=de make run-dev

# Server-Default Englisch
MONEY_TRACKER_LANGUAGE=en make run-dev

# Override per Request
curl -H "Accept-Language: en" localhost:8080
```

## Verifikation

- `make test` — Unit Tests grün (inkl. i18n Tests)
- `make test-integration` — Integration Tests grün
- `make build` — Build erfolgreich
